# BigchainDB API

This repository includes an API around [BigchainDB](https://www.bigchaindb.com/) to make it compatible with web 2.0 applications. It includes SSL encryption and closed endpoints that only allow for authenticated access via JSON Web Tokens, generated by [Auth0](https://auth0.com/). The API is built using [Connexion](https://github.com/zalando/connexion), the first framework for Python to implement [OpenAPI](https://swagger.io/docs/specification/about/). It is served via [gunicorn](https://gunicorn.org/), watched by [supervisor](http://supervisord.org/) and proxied by [Nginx](https://www.nginx.com/).

## Development Setup

1. Clone the repository and navigate inside it

2. Start all docker containers

        $ docker-compose up
    Wait for about a minute until all is configured correctly.

You can explore the API by visiting http://localhost:8002/v0.1/ui/. It not functioning though due to the lack of a valid JWT.

To rebuild the image, call

    $ docker-compose build

## Deployment

1. Close the direct access to BigchainDB by removing the lines 
    ```
    ports:
        - "8002:8000"
    ```
    from the `docker-compose.yaml`

2. Change the environment variables 
    ```
    AUTH0_DOMAIN: "your.domain.auth0.com"
    API_IDENTIFIER: "https://your.domain/yourapi"
    ```
    in the `docker-compose.yaml` to contain your Auth0 parameters.

3. Place your certificates in the folder `$HOME/cert$`.

4. Adjust the file `./nginx/nginx.conf` to contain the names of your certificates. 

## TODO:
* accept JWTs from uPort